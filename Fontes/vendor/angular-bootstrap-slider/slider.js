angular.module("ui.bootstrap-slider",[]).directive("slider",["$parse","$timeout",function(e,n){return{restrict:"AE",replace:!0,template:'<div><input class="slider-input" type="text" /></div>',require:"ngModel",scope:{max:"=",min:"=",step:"=",value:"=",ngModel:"=",range:"=",sliderid:"=",formater:"&",onStartSlide:"&",onStopSlide:"&",onSlide:"&"},link:function(a,i,r,t){function l(){function l(e,n,a){p[e]=n||a}function s(e,n,a){p[e]=n?parseFloat(n):a}function d(e,n,a){p[e]=n?n+""=="true":a}function f(e){return angular.isString(e)&&0===e.indexOf("[")?angular.fromJson(e):e}var p={};l("id",a.sliderid),l("orientation",r.orientation,"horizontal"),l("selection",r.selection,"before"),l("handle",r.handle,"round"),l("tooltip",r.tooltip,"show"),l("tooltipseparator",r.tooltipseparator,":"),s("min",a.min,0),s("max",a.max,10),s("step",a.step,1);var c=p.step+"",v=c.substring(c.lastIndexOf(".")+1);if(s("precision",r.precision,v),d("tooltip_split",r.tooltipsplit,!1),d("enabled",r.enabled,!0),d("naturalarrowkeys",r.naturalarrowkeys,!1),d("reversed",r.reversed,!1),d("range",a.range,!1),p.range){if(angular.isArray(a.value))p.value=a.value;else if(angular.isString(a.value)){if(p.value=f(a.value),!angular.isArray(p.value)){var g=parseFloat(a.value);isNaN(g)&&(g=5),g<a.min?(g=a.min,p.value=[g,p.max]):g>a.max?(g=a.max,p.value=[p.min,g]):p.value=[p.min,p.max]}}else p.value=[p.min,p.max];a.ngModel=p.value}else s("value",a.value,5);a.formater&&(p.formater=a.$eval(a.formater));var m=$(i).find(".slider-input").eq(0);if($.fn.slider){$.fn.slider.Constructor.prototype.disable=function(){this.picker.off()},$.fn.slider.Constructor.prototype.enable=function(){this.picker.on()},m.slider(p),m.slider("destroy"),m.slider(p);var S=f(r.updateevent);S=angular.isString(S)?[S]:["slide"],angular.forEach(S,function(e){m.on(e,function(e){t.$setViewValue(e.value),n(function(){a.$apply()})})});var h={slideStart:"onStartSlide",slide:"onSlide",slideStop:"onStopSlide"};angular.forEach(h,function(i,t){m.on(t,function(t){if(a[i]){var l=e(r[i]);l(a.$parent,{$event:t,value:t.value}),n(function(){a.$apply()})}})}),angular.isFunction(u)&&(u(),u=null),angular.isDefined(r.ngDisabled)&&(u=a.$watch(r.ngDisabled,function(e){m.slider(e?"disable":"enable")})),angular.isFunction(o)&&o(),o=a.$watch("ngModel",function(e){m.slider("setValue",e)})}}var o,u;l();var s=["min","max","step","range"];angular.forEach(s,function(e){a.$watch(e,function(){l()})})}}}]);